<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <form action="/signup" class="form" id="createAccount" method="post">
            <h1 class="form__title">Register</h1>
            <div class="form__message form__message--error" id="signupError"></div>
            <div class="form__input-group">
                <input name="fullname" type="text" id="signupFullname" class="form__input" autofocus placeholder="Full Name">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input name="username" type="text" id="signupUsername" class="form__input" autofocus placeholder="Username">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input name="email" type="text" class="form__input" autofocus placeholder="Email Address">
                <div class="form__input-error-message"></div>
            </div>
             <div class="form__input-group">
                <input name="phone" type="text" class="form__input" autofocus placeholder="Phone Number">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input name="password" type="password" class="form__input" autofocus placeholder="Password">
                <div class="form__input-error-message"></div>
            </div>
            <div class="form__input-group">
                <input  name="confirmpassword" type="password" class="form__input" autofocus placeholder="Confirm password">
                <div class="form__input-error-message"></div>
            </div>
            <button class="form__button" type="submit">Continue</button>
            <p class="form__text">
                <a class="form__link" href="/" id="linkLogin">Already have an account? Login here</a>
            </p>
        </form>
    </div>
<script>
    $(document).ready(function() {
        $("#createAccount").submit(function(e) {
            e.preventDefault();

            var fullname = $("#createAccount input[name='fullname']").val();
            var username = $("#createAccount input[name='username']").val();
            var email = $("#createAccount input[name='email']").val();
            var phone = $("#createAccount input[name='phone']").val();
            var password = $("#createAccount input[name='password']").val();
            var confirmpassword = $("#createAccount input[name='confirmpassword']").val();

            axios.post('/signup', {
                fullname: fullname,
                username: username,
                email: email,
                phone: phone,
                password: password,
                confirmpassword: confirmpassword
            })
            .then(function(response) {
                window.location.href = '/home';
            })
            .catch(function(error) {
                $("#signupError").text(error.response.data.error);
            });
        });
    });
</script>

</body>
</html>